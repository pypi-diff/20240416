# Comparing `tmp/darli-0.4.0-py3-none-any.whl.zip` & `tmp/darli-0.4.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,42 +1,46 @@
-Zip file size: 40072 bytes, number of entries: 40
--rw-r--r--  2.0 unx       92 b- defN 24-Feb-26 11:31 darli/__init__.py
--rw-r--r--  2.0 unx      283 b- defN 24-Feb-26 11:31 darli/backend/__init__.py
--rw-r--r--  2.0 unx     8325 b- defN 24-Feb-26 11:31 darli/backend/_base.py
--rw-r--r--  2.0 unx    13463 b- defN 24-Feb-26 11:31 darli/backend/_casadi.py
--rw-r--r--  2.0 unx    16832 b- defN 24-Feb-26 11:31 darli/backend/_pinocchio.py
--rw-r--r--  2.0 unx      152 b- defN 24-Feb-26 11:31 darli/functional/__init__.py
--rw-r--r--  2.0 unx     7917 b- defN 24-Feb-26 11:31 darli/functional/_body.py
--rw-r--r--  2.0 unx     1642 b- defN 24-Feb-26 11:31 darli/functional/_contact.py
--rw-r--r--  2.0 unx    10387 b- defN 24-Feb-26 11:31 darli/functional/_model.py
--rw-r--r--  2.0 unx     5553 b- defN 24-Feb-26 11:31 darli/functional/_state_space.py
--rw-r--r--  2.0 unx     1328 b- defN 24-Feb-26 11:31 darli/integrators/__init__.py
--rw-r--r--  2.0 unx     3453 b- defN 24-Feb-26 11:31 darli/integrators/_base.py
--rw-r--r--  2.0 unx     1707 b- defN 24-Feb-26 11:31 darli/integrators/_fwd_euler.py
--rw-r--r--  2.0 unx     1933 b- defN 24-Feb-26 11:31 darli/integrators/_mid_point.py
--rw-r--r--  2.0 unx     2090 b- defN 24-Feb-26 11:31 darli/integrators/_rk4.py
--rw-r--r--  2.0 unx       93 b- defN 24-Feb-26 11:31 darli/model/__init__.py
--rw-r--r--  2.0 unx     6758 b- defN 24-Feb-26 11:31 darli/model/_base.py
--rw-r--r--  2.0 unx     6083 b- defN 24-Feb-26 11:31 darli/model/_body.py
--rw-r--r--  2.0 unx     2965 b- defN 24-Feb-26 11:31 darli/model/_contact.py
--rw-r--r--  2.0 unx    10143 b- defN 24-Feb-26 11:31 darli/model/_model.py
--rw-r--r--  2.0 unx       67 b- defN 24-Feb-26 11:31 darli/parametric/__init__.py
--rw-r--r--  2.0 unx     8627 b- defN 24-Feb-26 11:31 darli/parametric/_functional.py
--rw-r--r--  2.0 unx    10573 b- defN 24-Feb-26 11:31 darli/parametric/_model.py
--rw-r--r--  2.0 unx       61 b- defN 24-Feb-26 11:31 darli/robots/__init__.py
--rw-r--r--  2.0 unx     4350 b- defN 24-Feb-26 11:31 darli/robots/_robots.py
--rw-r--r--  2.0 unx      104 b- defN 24-Feb-26 11:31 darli/state_space/__init__.py
--rw-r--r--  2.0 unx     1027 b- defN 24-Feb-26 11:31 darli/state_space/_base.py
--rw-r--r--  2.0 unx     2081 b- defN 24-Feb-26 11:31 darli/state_space/_casadi.py
--rw-r--r--  2.0 unx     4971 b- defN 24-Feb-26 11:31 darli/state_space/_common.py
--rw-r--r--  2.0 unx      588 b- defN 24-Feb-26 11:31 darli/state_space/_pinocchio.py
--rw-r--r--  2.0 unx      193 b- defN 24-Feb-26 11:31 darli/utils/arrays/__init__.py
--rw-r--r--  2.0 unx     2333 b- defN 24-Feb-26 11:31 darli/utils/arrays/_arraylike.py
--rw-r--r--  2.0 unx     4578 b- defN 24-Feb-26 11:31 darli/utils/arrays/_casadi.py
--rw-r--r--  2.0 unx     4753 b- defN 24-Feb-26 11:31 darli/utils/arrays/_numpy.py
--rw-r--r--  2.0 unx       72 b- defN 24-Feb-26 11:31 darli/utils/quaternions/__init__.py
--rw-r--r--  2.0 unx     2596 b- defN 24-Feb-26 11:31 darli/utils/quaternions/_quaternions.py
--rw-r--r--  2.0 unx     7169 b- defN 24-Feb-26 11:31 darli-0.4.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Feb-26 11:31 darli-0.4.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        6 b- defN 24-Feb-26 11:31 darli-0.4.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3301 b- defN 24-Feb-26 11:31 darli-0.4.0.dist-info/RECORD
-40 files, 158741 bytes uncompressed, 34830 bytes compressed:  78.1%
+Zip file size: 45667 bytes, number of entries: 44
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-16 07:17 darli/__init__.py
+-rw-r--r--  2.0 unx      283 b- defN 24-Apr-16 07:17 darli/backend/__init__.py
+-rw-r--r--  2.0 unx     8481 b- defN 24-Apr-16 07:17 darli/backend/_base.py
+-rw-r--r--  2.0 unx    15153 b- defN 24-Apr-16 07:17 darli/backend/_casadi.py
+-rw-r--r--  2.0 unx    16905 b- defN 24-Apr-16 07:17 darli/backend/_pinocchio.py
+-rw-r--r--  2.0 unx       89 b- defN 24-Apr-16 07:17 darli/backend/liecasadi/__init__.py
+-rw-r--r--  2.0 unx     3948 b- defN 24-Apr-16 07:17 darli/backend/liecasadi/quaternion.py
+-rw-r--r--  2.0 unx     7227 b- defN 24-Apr-16 07:17 darli/backend/liecasadi/so3.py
+-rw-r--r--  2.0 unx      142 b- defN 24-Apr-16 07:17 darli/model/__init__.py
+-rw-r--r--  2.0 unx     6869 b- defN 24-Apr-16 07:17 darli/model/_base.py
+-rw-r--r--  2.0 unx     6202 b- defN 24-Apr-16 07:17 darli/model/_body.py
+-rw-r--r--  2.0 unx     2967 b- defN 24-Apr-16 07:17 darli/model/_contact.py
+-rw-r--r--  2.0 unx     9954 b- defN 24-Apr-16 07:17 darli/model/_model.py
+-rw-r--r--  2.0 unx      105 b- defN 24-Apr-16 07:17 darli/model/functional/__init__.py
+-rw-r--r--  2.0 unx     7906 b- defN 24-Apr-16 07:17 darli/model/functional/_body.py
+-rw-r--r--  2.0 unx     1631 b- defN 24-Apr-16 07:17 darli/model/functional/_contact.py
+-rw-r--r--  2.0 unx    10444 b- defN 24-Apr-16 07:17 darli/model/functional/_model.py
+-rw-r--r--  2.0 unx       62 b- defN 24-Apr-16 07:17 darli/parametric/__init__.py
+-rw-r--r--  2.0 unx     9623 b- defN 24-Apr-16 07:17 darli/parametric/_functional.py
+-rw-r--r--  2.0 unx    11502 b- defN 24-Apr-16 07:17 darli/parametric/_model.py
+-rw-r--r--  2.0 unx       61 b- defN 24-Apr-16 07:17 darli/robots/__init__.py
+-rw-r--r--  2.0 unx     4464 b- defN 24-Apr-16 07:17 darli/robots/_robots.py
+-rw-r--r--  2.0 unx      193 b- defN 24-Apr-16 07:17 darli/state_space/__init__.py
+-rw-r--r--  2.0 unx     1027 b- defN 24-Apr-16 07:17 darli/state_space/_base.py
+-rw-r--r--  2.0 unx     2135 b- defN 24-Apr-16 07:17 darli/state_space/_casadi.py
+-rw-r--r--  2.0 unx     4995 b- defN 24-Apr-16 07:17 darli/state_space/_common.py
+-rw-r--r--  2.0 unx     6324 b- defN 24-Apr-16 07:17 darli/state_space/_functional.py
+-rw-r--r--  2.0 unx      600 b- defN 24-Apr-16 07:17 darli/state_space/_pinocchio.py
+-rw-r--r--  2.0 unx     1097 b- defN 24-Apr-16 07:17 darli/state_space/_state_space.py
+-rw-r--r--  2.0 unx     1328 b- defN 24-Apr-16 07:17 darli/state_space/integrators/__init__.py
+-rw-r--r--  2.0 unx     3455 b- defN 24-Apr-16 07:17 darli/state_space/integrators/_base.py
+-rw-r--r--  2.0 unx     1707 b- defN 24-Apr-16 07:17 darli/state_space/integrators/_fwd_euler.py
+-rw-r--r--  2.0 unx     1933 b- defN 24-Apr-16 07:17 darli/state_space/integrators/_mid_point.py
+-rw-r--r--  2.0 unx     2090 b- defN 24-Apr-16 07:17 darli/state_space/integrators/_rk4.py
+-rw-r--r--  2.0 unx      193 b- defN 24-Apr-16 07:17 darli/utils/arrays/__init__.py
+-rw-r--r--  2.0 unx     2333 b- defN 24-Apr-16 07:17 darli/utils/arrays/_arraylike.py
+-rw-r--r--  2.0 unx     4578 b- defN 24-Apr-16 07:17 darli/utils/arrays/_casadi.py
+-rw-r--r--  2.0 unx     4754 b- defN 24-Apr-16 07:17 darli/utils/arrays/_numpy.py
+-rw-r--r--  2.0 unx       72 b- defN 24-Apr-16 07:17 darli/utils/quaternions/__init__.py
+-rw-r--r--  2.0 unx     2597 b- defN 24-Apr-16 07:17 darli/utils/quaternions/_quaternions.py
+-rw-r--r--  2.0 unx     7169 b- defN 24-Apr-16 07:17 darli-0.4.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-16 07:17 darli-0.4.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        6 b- defN 24-Apr-16 07:17 darli-0.4.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3746 b- defN 24-Apr-16 07:17 darli-0.4.1.dist-info/RECORD
+44 files, 176534 bytes uncompressed, 39683 bytes compressed:  77.5%
```

## zipnote {}

```diff
@@ -9,57 +9,48 @@
 
 Filename: darli/backend/_casadi.py
 Comment: 
 
 Filename: darli/backend/_pinocchio.py
 Comment: 
 
-Filename: darli/functional/__init__.py
+Filename: darli/backend/liecasadi/__init__.py
 Comment: 
 
-Filename: darli/functional/_body.py
+Filename: darli/backend/liecasadi/quaternion.py
 Comment: 
 
-Filename: darli/functional/_contact.py
+Filename: darli/backend/liecasadi/so3.py
 Comment: 
 
-Filename: darli/functional/_model.py
-Comment: 
-
-Filename: darli/functional/_state_space.py
-Comment: 
-
-Filename: darli/integrators/__init__.py
-Comment: 
-
-Filename: darli/integrators/_base.py
+Filename: darli/model/__init__.py
 Comment: 
 
-Filename: darli/integrators/_fwd_euler.py
+Filename: darli/model/_base.py
 Comment: 
 
-Filename: darli/integrators/_mid_point.py
+Filename: darli/model/_body.py
 Comment: 
 
-Filename: darli/integrators/_rk4.py
+Filename: darli/model/_contact.py
 Comment: 
 
-Filename: darli/model/__init__.py
+Filename: darli/model/_model.py
 Comment: 
 
-Filename: darli/model/_base.py
+Filename: darli/model/functional/__init__.py
 Comment: 
 
-Filename: darli/model/_body.py
+Filename: darli/model/functional/_body.py
 Comment: 
 
-Filename: darli/model/_contact.py
+Filename: darli/model/functional/_contact.py
 Comment: 
 
-Filename: darli/model/_model.py
+Filename: darli/model/functional/_model.py
 Comment: 
 
 Filename: darli/parametric/__init__.py
 Comment: 
 
 Filename: darli/parametric/_functional.py
 Comment: 
@@ -81,17 +72,38 @@
 
 Filename: darli/state_space/_casadi.py
 Comment: 
 
 Filename: darli/state_space/_common.py
 Comment: 
 
+Filename: darli/state_space/_functional.py
+Comment: 
+
 Filename: darli/state_space/_pinocchio.py
 Comment: 
 
+Filename: darli/state_space/_state_space.py
+Comment: 
+
+Filename: darli/state_space/integrators/__init__.py
+Comment: 
+
+Filename: darli/state_space/integrators/_base.py
+Comment: 
+
+Filename: darli/state_space/integrators/_fwd_euler.py
+Comment: 
+
+Filename: darli/state_space/integrators/_mid_point.py
+Comment: 
+
+Filename: darli/state_space/integrators/_rk4.py
+Comment: 
+
 Filename: darli/utils/arrays/__init__.py
 Comment: 
 
 Filename: darli/utils/arrays/_arraylike.py
 Comment: 
 
 Filename: darli/utils/arrays/_casadi.py
@@ -102,20 +114,20 @@
 
 Filename: darli/utils/quaternions/__init__.py
 Comment: 
 
 Filename: darli/utils/quaternions/_quaternions.py
 Comment: 
 
-Filename: darli-0.4.0.dist-info/METADATA
+Filename: darli-0.4.1.dist-info/METADATA
 Comment: 
 
-Filename: darli-0.4.0.dist-info/WHEEL
+Filename: darli-0.4.1.dist-info/WHEEL
 Comment: 
 
-Filename: darli-0.4.0.dist-info/top_level.txt
+Filename: darli-0.4.1.dist-info/top_level.txt
 Comment: 
 
-Filename: darli-0.4.0.dist-info/RECORD
+Filename: darli-0.4.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## darli/backend/_base.py

```diff
@@ -42,14 +42,15 @@
             raise ValueError(f"Unknown joint type: {string}")
 
 
 @dataclass
 class BodyInfo:
     position: ArrayLike
     rotation: ArrayLike
+    quaternion: ArrayLike
     jacobian: Dict[Frame, ArrayLike]
     djacobian: Dict[Frame, ArrayLike]
     lin_vel: Dict[Frame, ArrayLike]
     ang_vel: Dict[Frame, ArrayLike]
     lin_acc: Dict[Frame, ArrayLike]
     ang_acc: Dict[Frame, ArrayLike]
 
@@ -145,14 +146,19 @@
 
     @property
     def urdf_path(self) -> str:
         """Returns the path to the URDF file used to build the model."""
         return self.__urdf_path
 
     @property
+    def total_mass(self) -> float:
+        """Returns the total mass of the robot."""
+        return self._pindata.mass[0]
+
+    @property
     def nq(self) -> int:
         return self._pinmodel.nq
 
     @property
     def nv(self) -> int:
         return self._pinmodel.nv
 
@@ -321,9 +327,8 @@
 
     @abstractmethod
     def integrate_configuration(
         self,
         q: ArrayLike | None = None,
         v: ArrayLike | None = None,
         dt: float = 1,
-    ) -> ArrayLike:
-        ...
+    ) -> ArrayLike: ...
```

## darli/backend/_casadi.py

```diff
@@ -1,14 +1,20 @@
 import casadi_kin_dyn.casadi_kin_dyn as ckd
 
+from .liecasadi import SO3
 from ._base import BackendBase, ConeBase, Frame, BodyInfo, JointType, CentroidalDynamics
 from ..utils.arrays import CasadiLikeFactory, ArrayLike
 import casadi as cs
 from typing import Dict
 import numpy.typing as npt
+from . import liecasadi as lie
+
+
+# TODO: Parse joints tyoe from description, and create
+# approprate Lie group for them
 
 
 class CasadiCone(ConeBase):
     def __init__(self, force, mu, contact_type="point", X=None, Y=None):
         self.force = force
         self.mu = mu
         self.contact_type = contact_type
@@ -321,18 +327,18 @@
         return self.__kindyn.potentialEnergyRegressor()(
             q=q if q is not None else self._q,
         )["potential_regressor"]
 
     def update_body(self, body: str, body_urdf_name: str = None) -> BodyInfo:
         if body_urdf_name is None:
             body_urdf_name = body
-
         return BodyInfo(
             position=self.__kindyn.fk(body_urdf_name)(q=self._q)["ee_pos"],
             rotation=self.__kindyn.fk(body_urdf_name)(q=self._q)["ee_rot"],
+            quaternion=SO3.from_matrix(self.__kindyn.fk(body_urdf_name)(q=self._q)["ee_rot"]).xyzw,
             jacobian={
                 Frame.from_str(frame): self.__kindyn.jacobian(
                     body_urdf_name, self.__frame_mapping[frame]
                 )(q=self._q)["J"]
                 for frame in self.__frame_types
             },
             lin_vel={
@@ -374,18 +380,59 @@
 
     def integrate_configuration(
         self,
         q: ArrayLike | None = None,
         v: ArrayLike | None = None,
         dt: float | cs.SX = 1.0,
     ) -> ArrayLike:
-        return self.__kindyn.integrate()(
-            q=q if q is not None else self._q,
-            v=v * dt if v is not None else self._v * dt,
-        )["qnext"]
+        if self.nq != self.nv:
+            q = q if q is not None else self._q
+            v = v if v is not None else self._v
+
+            # we have to use lie geometry
+            # to integrate se3 and joint space separately
+            # TODO:
+            # replace with SE3
+            # what if someone will fix base position?
+            pos = q[:3]
+            xyzw = q[3:7]
+            so3 = lie.SO3(xyzw)
+            joints = q[7:]
+
+            pos_tang = v[:3] * dt
+            so3_tang = lie.SO3Tangent(v[3:6] * dt)
+            joint_tang = v[6:] * dt
+
+            # se3 = lie.SE3(pos=pos, xyzw=xyzw)
+            # se3_tang = lie.SE3Tangent(v[:6] * dt)
+            # container[:3] = se3_next.xyzw
+            # container[3:7] = se3_next.xyzw
+            # se3_next = se3 + so3_tang
+
+            pos_next = pos + pos_tang
+            so3_next = so3 + so3_tang
+            joints_next = joints + joint_tang
+
+            container = cs.SX.zeros(self.nq)
+            configuration_next = cs.vertcat(pos_next, so3_next.xyzw, joints_next)
+            # container[:3] = pos_next
+            # container[3:7] = so3_next.xyzw
+            # container[7:] = joints_next
+            container = configuration_next
+            return container
+        else:
+            return (q if q is not None else self._q) + (
+                v if v is not None else self._v
+            ) * dt
+
+        # do not ever try to use this in optimization
+        # return self.__kindyn.integrate()(
+        #     q=q if q is not None else self._q,
+        #     v=v * dt if v is not None else self._v * dt,
+        # )["qnext"]
 
     def centroidal_dynamics(
         self,
         q: ArrayLike | None = None,
         v: ArrayLike | None = None,
         dv: ArrayLike | None = None,
     ) -> CentroidalDynamics:
```

## darli/backend/_pinocchio.py

```diff
@@ -433,14 +433,15 @@
             ang_acc[frame] = (
                 jacobian[frame][3:] @ self._dv + djacobian[frame][3:] @ self._v
             )
 
         result = BodyInfo(
             position=self.__data.oMf[frame_idx].translation,
             rotation=self.__data.oMf[frame_idx].rotation,
+            quaternion=pin.se3ToXYZQUAT(self.__data.oMf[frame_idx])[3:],
             jacobian=jacobian,
             djacobian=djacobian,
             lin_vel=lin_vel,
             ang_vel=ang_vel,
             lin_acc=lin_acc,
             ang_acc=ang_acc,
         )
```

## darli/model/__init__.py

```diff
@@ -1,2 +1,3 @@
 from ._model import Model  # noqa: F401
 from ._body import Body, FrameQuantity  # noqa: F401
+from .functional import Functional  # noqa: F401
```

## darli/model/_base.py

```diff
@@ -170,14 +170,22 @@
     def add_contact(self, contact_type="point", frame=Frame.LOCAL_WORLD_ALIGNED):
         pass
 
 
 class ModelBase(ABC):
     @property
     @abstractmethod
+    def expression_model(self):
+        """
+        Property should return the underlying model with expressions instead of functions
+        """
+        pass
+
+    @property
+    @abstractmethod
     def q(self) -> ArrayLike:
         pass
 
     @property
     @abstractmethod
     def v(self) -> ArrayLike:
         pass
@@ -316,19 +324,14 @@
         self,
         q: ArrayLike | None = None,
         v: ArrayLike | None = None,
         dv: ArrayLike | None = None,
     ) -> ArrayLike:
         pass
 
-    # @property
-    # @abstractmethod
-    # def state_space(self):
-    #     pass
-
     @property
     @abstractmethod
     def selector(self):
         pass
 
     @abstractmethod
     def add_body(self, bodies_names: List[str] | Dict[str, str]):
```

## darli/model/_body.py

```diff
@@ -40,15 +40,17 @@
     def rotation(self):
         if self.__info is None:
             raise ValueError("Rotation is not calculated, run `update()` first")
         return self.__info.rotation
 
     @property
     def quaternion(self):
-        raise NotImplementedError
+        if self.__info is None:
+            raise ValueError("Quaternion is not calculated, run `update()` first")
+        return self.__info.quaternion
 
     @property
     def jacobian(self) -> FrameQuantity:
         if self.__info is None:
             raise ValueError("Jacobian is not calculated, run `update()` first")
         return FrameQuantity(
             local=self.__info.jacobian[Frame.LOCAL],
```

## darli/model/_contact.py

```diff
@@ -58,15 +58,15 @@
     @property
     def ref_frame(self):
         return self.__frame
 
     def update(self, jacobian: ArrayLike | None = None):
         # if jacobian is given directly, just use it
         if jacobian is not None:
-            self.__jacobian = jacobian[:, : self.dim]
+            self.__jacobian = jacobian.T[:, : self.dim]
         else:
             self.__jacobian = (
                 self.__backend.update_body(self.__name)
                 .jacobian[self.__frame]
                 .T[:, : self.dim]
             )
```

## darli/model/_model.py

```diff
@@ -23,18 +23,17 @@
 
         # force applied to actuators, i.e. selector @ qfrc_u
         self._u = self._backend._tau
 
         self.__bodies: Dict[str, BodyBase] = dict()
         self.update_selector()
 
-        # if isinstance(self.backend, CasadiBackend):
-        #     self.__state_space = CasadiStateSpace(self)
-        # else:
-        #     self.__state_space = PinocchioStateSpace(self)
+    @property
+    def expression_model(self):
+        return self
 
     @property
     def q(self) -> ArrayLike:
         return self._q
 
     @property
     def v(self) -> ArrayLike:
@@ -259,15 +258,15 @@
         v: ArrayLike | None = None,
         u: ArrayLike | None = None,
     ) -> ArrayLike:
         # if u is not passed, we assume and take current tau, otherwise premultiply by selector matrix
         return self._backend.aba(
             q if q is not None else self._q,
             v if v is not None else self._v,
-            tau=(self._qfrc_u if u is None else self.selector @ u)
+            tau=(self.selector @ self._qfrc_u if u is None else self.selector @ u)
             + self.contact_qforce,
         )
 
     def inverse_dynamics(
         self,
         q: ArrayLike | None = None,
         v: ArrayLike | None = None,
@@ -281,18 +280,14 @@
                 q if q is not None else self._q,
                 v if v is not None else self._v,
                 dv if dv is not None else self._dv,
             )
             - self.contact_qforce
         )
 
-    # @property
-    # def state_space(self):
-    #     return self.__state_space
-
     @property
     def selector(self):
         return self.__selector
 
     def joint_id(self, name: str) -> int:
         return self._backend.joint_id(name)
```

## darli/parametric/__init__.py

```diff
@@ -1,2 +1,2 @@
-from ._model import Parametric
+from ._model import Model
 from ._functional import Functional
```

## darli/parametric/_functional.py

```diff
@@ -1,34 +1,70 @@
 from ..backend import BackendBase, CasadiBackend
 from ..utils.arrays import ArrayLike
 import casadi as cs
 
 from ..model._base import Energy, CoM, ModelBase
-from ._model import Parametric
+from ._model import Model, Regressors
 
 from ..model._body import Body
-from ..functional import FunctionalBody, FunctionalStateSpace
-
+from ..model.functional import FunctionalBody
 from typing import List, Dict
 
 
 class Functional(ModelBase):
     def __init__(self, backend: BackendBase):
         assert isinstance(
             backend, CasadiBackend
         ), "Symbolic robot only works with Casadi backend"
         self._backend = backend
 
-        self.__robot = Parametric(backend)
+        self.__robot = Model(backend)
 
         # instances we want to cache
         self.__com = None
         self.__energy = None
 
     @property
+    def expression_model(self):
+        return self.__robot
+
+    @property
+    def regressors(
+        self,
+        q: ArrayLike | None = None,
+        v: ArrayLike | None = None,
+        dv: ArrayLike | None = None,
+    ) -> Regressors:
+        regrs = self.__robot.regressors(q, v, dv)
+
+        return Regressors(
+            torque=cs.Function(
+                "torque_regressor",
+                [self.q, self.v, self.dv],
+                [regrs.torque],
+                ["q", "v", "dv"],
+                ["torque_regressor"],
+            ),
+            kinetic=cs.Function(
+                "kinetic_regressor",
+                [self.q, self.v],
+                [regrs.kinetic],
+                ["q", "v"],
+                ["kinetic_regressor"],
+            ),
+            potential=cs.Function(
+                "potential_regressor",
+                [self.q],
+                [regrs.potential],
+                ["q"],
+                ["potential_regressor"],
+            ),
+        )
+
+    @property
     def parameters(self) -> ArrayLike:
         return self.__robot._parameters
 
     @property
     def q(self) -> ArrayLike:
         return self.__robot.q
 
@@ -83,17 +119,17 @@
 
     def add_body(self, bodies_names: List[str] | Dict[str, str]):
         return self.__robot.add_body(bodies_names, Body)
 
     def body(self, name: str) -> FunctionalBody:
         return FunctionalBody.from_body(self.__robot.body(name))
 
-    @property
-    def state_space(self):
-        return FunctionalStateSpace.from_space(self.__robot.state_space)
+    # @property
+    # def state_space(self):
+    #     return FunctionalStateSpace.from_space(self.__robot.state_space)
 
     @property
     def selector(self):
         return self.__robot.selector
 
     def joint_id(self, name: str) -> int:
         return self.__robot.joint_id(name)
```

## darli/parametric/_model.py

```diff
@@ -1,17 +1,26 @@
 from typing import List, Dict
 import numpy as np
 
 from ..backend import BackendBase, CasadiBackend
 from ..utils.arrays import ArrayLike
 from ..model._body import Body
 from ..model._base import Energy, CoM, ModelBase, BodyBase
+from dataclasses import dataclass
 
 
-class Parametric(ModelBase):
+@dataclass
+class Regressors:
+    torque: ArrayLike
+    kinetic: ArrayLike
+    potential: ArrayLike
+    # TODO: momentum later
+
+
+class Model(ModelBase):
     def __init__(self, backend: BackendBase):
         self._backend = backend
 
         self._q = self._backend._q
         self._v = self._backend._v
         self._dv = self._backend._dv
 
@@ -27,14 +36,39 @@
         else:
             self._parameters = self.backend.math.zeros(self.nbodies * 10).array
 
         self.__bodies: Dict[str, BodyBase] = dict()
         self.update_selector()
 
     @property
+    def expression_model(self):
+        return self
+
+    def regressors(
+        self,
+        q: ArrayLike | None = None,
+        v: ArrayLike | None = None,
+        dv: ArrayLike | None = None,
+    ) -> Regressors:
+        return Regressors(
+            torque=self._backend.torque_regressor(
+                q if q is not None else self.q,
+                v if v is not None else self.v,
+                dv if dv is not None else self.dv,
+            ),
+            kinetic=self._backend.kinetic_regressor(
+                q if q is not None else self.q,
+                v if v is not None else self.v,
+            ),
+            potential=self._backend.potential_regressor(
+                q if q is not None else self.q,
+            ),
+        )
+
+    @property
     def parameters(self) -> ArrayLike:
         return self._parameters
 
     @property
     def q(self) -> ArrayLike:
         return self._q
 
@@ -298,17 +332,17 @@
         u: ArrayLike | None = None,
     ) -> ArrayLike:
         return self._backend.math.solve(
             self.inertia(q),
             -self.bias_force(q, v) + (self._qfrc_u if u is None else self.selector @ u),
         ).array
 
-    @property
-    def state_space(self):
-        raise NotImplementedError
+    # @property
+    # def state_space(self):
+    #     raise NotImplementedError
 
     @property
     def selector(self):
         return self.__selector
 
     def joint_id(self, name: str) -> int:
         return self._backend.joint_id(name)
```

## darli/robots/_robots.py

```diff
@@ -1,10 +1,10 @@
 from ..model import Model
-from ..functional import Functional
-from ..parametric import Parametric
+from ..model.functional import Functional
+from ..parametric import Model as Parametric
 from ..backend import CasadiBackend, PinocchioBackend, Frame, JointType
 from typing import Dict
 
 
 def biped(
     constructor: Model | Parametric | Functional,
     backend: CasadiBackend | PinocchioBackend,
@@ -93,17 +93,17 @@
     constructor: Model | Parametric | Functional,
     backend: CasadiBackend | PinocchioBackend,
     urdf_path: str,
     torso: Dict = None,
     foots: Dict = None,
     arm: Dict = None,
     floating_selector=True,
+    friction = 1.0,
     reference: Frame = Frame.LOCAL_WORLD_ALIGNED,
-    root_joint: JointType = None,
-) -> Model | Parametric | Functional:
+    root_joint: JointType = None) -> Model | Parametric | Functional:
     bodies_names = {}
 
     if torso is not None:
         if isinstance(torso, str):
             bodies_names.update([torso])
         else:
             bodies_names.update(torso)
@@ -117,17 +117,20 @@
     if root_joint is not None:
         model_cls: Model | Parametric | Functional = constructor(
             backend(urdf_path, root_joint=root_joint)
         )
     else:
         model_cls: Model | Parametric | Functional = constructor(backend(urdf_path))
 
+    model_cls.add_body(bodies_names)
+
     for foot in foots.keys():
         body = model_cls.body(foot)
         body.add_contact(frame=reference, contact_type="point")
+        body.contact.add_cone(mu=friction)
 
     if floating_selector:
         model_cls.update_selector(passive_joints=range(6))
 
     return model_cls
```

## darli/state_space/__init__.py

```diff
@@ -1,3 +1,5 @@
 from ._casadi import CasadiStateSpace
 from ._base import StateSpaceBase
-from ._common import StateSpace
+from ._common import CommonStateSpace
+from ._functional import FunctionalStateSpace
+from ._state_space import StateSpace
```

## darli/state_space/_casadi.py

```diff
@@ -1,40 +1,40 @@
-from ._common import StateSpace
+from ._common import CommonStateSpace
 from ..model._base import ModelBase
 import casadi as cs
 from ..backend import CasadiBackend
 from ..utils.arrays import CasadiLikeFactory
 from ..utils.quaternions import state_tangent_map
 
 
-class CasadiStateSpace(StateSpace):
+class CasadiStateSpace(CommonStateSpace):
     def __init__(self, model: ModelBase) -> None:
         super().__init__(model)
 
         assert isinstance(model.backend, CasadiBackend), "This is Casadi-only class"
 
     @property
     def state_jacobian(self):
         # if not free flyer
         if self.model.nq == self.model.nv:
             return cs.jacobian(self.time_variation(), self.state)
 
-        map = state_tangent_map(self.state, CasadiLikeFactory)
+        state_map = state_tangent_map(self.state, CasadiLikeFactory)
 
-        return map.T @ cs.jacobian(self.time_variation(), self.state) @ map
+        return state_map.T @ cs.jacobian(self.time_variation(), self.state) @ state_map
 
     @property
     def input_jacobian(self):
         # if not free flyer
         if self.model.nq == self.model.nv:
             return cs.jacobian(self.time_variation(), self.model.qfrc_u)
 
-        map = state_tangent_map(self.state, CasadiLikeFactory)
+        state_map = state_tangent_map(self.state, CasadiLikeFactory)
 
-        return map.T @ cs.jacobian(self.time_variation(), self.model.qfrc_u)
+        return state_map.T @ cs.jacobian(self.time_variation(), self.model.qfrc_u)
 
     def force_jacobian(self, body_name: str) -> cs.Function:
         # early quit if we have already computed the jacobian
         if body_name in self.force_jacobians:
             return self.force_jacobians[body_name]
 
         # check if any of bodies have the name we need
@@ -43,17 +43,17 @@
 
         if self.model.bodies[body_name].contact is None:
             raise KeyError(f"Body {body_name} has no contact")
 
         xdot = self.time_variation()
         body = self.model.body(body_name)
 
-        map = state_tangent_map(self.state, CasadiLikeFactory)
+        state_map = state_tangent_map(self.state, CasadiLikeFactory)
 
         if body_name not in self.force_jacobians:
             self.force_jacobians[body_name] = (
-                map.T @ cs.jacobian(xdot, body.contact.force)
+                state_map.T @ cs.jacobian(xdot, body.contact.force)
                 if self.model.nq != self.model.nv
                 else cs.jacobian(xdot, body.contact.force)
             )
 
         return self.force_jacobians[body_name]
```

## darli/state_space/_common.py

```diff
@@ -1,20 +1,20 @@
 from ..model._base import ModelBase
 from ._base import StateSpaceBase
 
 import casadi as cs
 from typing import Dict
 from ..utils.arrays import ArrayLike
 from ..utils.quaternions import left_mult, expand_map
-from ..integrators import Integrator, ForwardEuler
+from .integrators import Integrator, ForwardEuler
 
 
-class StateSpace(StateSpaceBase):
+class CommonStateSpace(StateSpaceBase):
     def __init__(self, model: ModelBase) -> None:
-        self.__model: ModelBase = model
+        self.__model: ModelBase = model.expression_model
 
         self.__integrator: Integrator = ForwardEuler(self.__model)
         self.__force_jacobians: Dict[str, ArrayLike] = {}
 
     def set_integrator(self, integrator: Integrator):
         self.__integrator = integrator(self.__model)
 
@@ -77,15 +77,15 @@
             # extract velocity of the freebody
             container[:3] = self.__model.v[:3]
             # extract quaternion
             quat = self.__model.q[3:7]
             omega = self.__model.v[3:6]
 
             # normalize the quaternion to prevent drift over time
-            quat = quat / self.__model.backend.math.norm_2(quat).array
+            # quat = quat / self.__model.backend.math.norm_2(quat).array
 
             # from scalar last to scalar first
             quat_changed = quat
             quat_changed[[0, 1, 2, 3]] = quat_changed[[3, 0, 1, 2]]
 
             quat_dot = (
                 0.5
```

## darli/state_space/_pinocchio.py

```diff
@@ -1,13 +1,13 @@
-from ._common import StateSpace
+from ._common import CommonStateSpace
 from ..model._base import ModelBase
 import casadi as cs
 
 
-class PinocchioStateSpace(StateSpace):
+class PinocchioStateSpace(CommonStateSpace):
     def __init__(self, model: ModelBase) -> None:
         super().__init__(model)
 
     @property
     def state_jacobian(self):
         # FIXME: separate implementation
         raise NotImplementedError
```

## darli/utils/arrays/_numpy.py

```diff
@@ -104,15 +104,15 @@
 class NumpyLikeFactory(ArrayLikeFactory):
     @staticmethod
     def zeros(*x) -> "NumpyLike":
         """
         Returns:
             NumpyLike: zero matrix of dimension x
         """
-        return NumpyLike(np.zeros(x))
+        return NumpyLike(np.zeros(*x))
 
     @staticmethod
     def eye(x: int) -> "NumpyLike":
         """
         Args:
             x (int): matrix dimension
```

## darli/utils/quaternions/__init__.py

```diff
@@ -1 +1 @@
-from ._quaternions import hat, left_mult, expand_map, state_tangent_map 
+from ._quaternions import hat, left_mult, expand_map, state_tangent_map
```

## darli/utils/quaternions/_quaternions.py

 * *Ordering differences only*

```diff
@@ -92,8 +92,8 @@
     q = state[3:7]  # Orientation (quaternion)
 
     res = math.zeros((state.shape[0], state.shape[0] - 1)).array
     res[0:3, 0:3] = math.eye(3).array
     res[3:7, 3:6] = tangent_map(q, math)
     res[7:, 6:] = math.eye(state.shape[0] - 7).array
 
-    return res
+    return res
```

## Comparing `darli/functional/_body.py` & `darli/model/functional/_body.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 import casadi as cs
-from ..backend import BackendBase, Frame
-from ..model._base import BodyBase
-from ..model._body import Body, FrameQuantity
+from ...backend import BackendBase, Frame
+from .._base import BodyBase
+from .._body import Body, FrameQuantity
 from ._contact import FunctionalContact
 
 
 class FunctionalBody(BodyBase):
     def __init__(
         self,
         name=None,
```

## Comparing `darli/functional/_contact.py` & `darli/model/functional/_contact.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
-from ..model._base import ContactBase
-from ..backend import BackendBase, Frame
-from ..model._contact import Contact
+from .._base import ContactBase
+from ...backend import BackendBase, Frame
+from .._contact import Contact
 import casadi as cs
 
 
 class FunctionalContact(ContactBase):
     def __init__(
         self,
         name: str = None,
```

## Comparing `darli/functional/_model.py` & `darli/model/functional/_model.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 from darli.backend import BackendBase, CasadiBackend, CentroidalDynamics
 from darli.utils.arrays import ArrayLike
 import casadi as cs
 
-from ..model._base import Energy, CoM
-from ..model._model import Model, ModelBase
-from ..model._body import Body
+from .._base import Energy, CoM
+from .._model import Model, ModelBase
+from .._body import Body
 
 # from ...model.model import Model, ModelBase
 # from .state_space import FunctionalStateSpace
 from ._body import FunctionalBody
 
 from typing import List, Dict
 
@@ -24,14 +24,18 @@
 
         # instances we want to cache
         self.__com = None
         self.__energy = None
         self.__centroidal = None
 
     @property
+    def expression_model(self):
+        return self.__model
+
+    @property
     def q(self) -> ArrayLike:
         return self.__model.q
 
     @property
     def v(self) -> ArrayLike:
         return self.__model.v
```

## Comparing `darli/functional/_state_space.py` & `darli/state_space/_functional.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,25 +1,34 @@
-from ..state_space import CasadiStateSpace, StateSpaceBase
-from ..utils.arrays import ArrayLike
+from . import CasadiStateSpace, StateSpaceBase
+
+# from ..utils.arrays import ArrayLike
 from ..model._base import ModelBase
 import casadi as cs
-from ..integrators import Integrator
+from .integrators import Integrator
 from typing import Type
 
 
 class FunctionalStateSpace(StateSpaceBase):
     def __init__(
         self,
         model: ModelBase = None,
         space: CasadiStateSpace = None,
     ) -> None:
         if space is not None:
             self.__space = space
         else:
-            self.__space = CasadiStateSpace(model)
+            self.__space = CasadiStateSpace(model.expression_model)
+
+        # parameters should be set from the model is parametric, otherwise it should be empty
+        self.__parameters = []
+        self.__parameters_name = []
+
+        if hasattr(model, "parameters"):
+            self.__parameters = [model.parameters]
+            self.__parameters_name = ["theta"]
 
     def set_integrator(self, integrator_cls: Type[Integrator]):
         """
         Set the integrator for the system using the provided Integrator class.
 
         Args:
             integrator_cls (Type[Integrator]): The class (constructor) of the integrator to be used.
@@ -54,53 +63,57 @@
         return cs.Function(
             "derivative",
             [
                 self.__space.model.q,
                 self.__space.model.v,
                 self.__space.model.qfrc_u,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [
                 self.__space.derivative(
                     self.__space.model.q,
                     self.__space.model.v,
                     self.__space.model.qfrc_u,
                 )
             ],
             [
                 "q",
                 "v",
                 "tau",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["derivative"],
         )
 
     @property
     def time_variation(self):
         return cs.Function(
             "time_variation",
             [
                 self.__space.model.q,
                 self.__space.model.v,
                 self.__space.model.qfrc_u,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [
                 self.__space.time_variation(
                     self.__space.model.q,
                     self.__space.model.v,
                     self.__space.model.qfrc_u,
                 )
             ],
             [
                 "q",
                 "v",
                 "tau",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["time_variation"],
         )
 
     def rollout(
         self, dt: float, n_steps: int, control_sampling: float | None = None
     ) -> cs.Function:
@@ -120,79 +133,87 @@
 
         return cs.Function(
             "rollout",
             [
                 self.__space.state,
                 container,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [
                 self.__space.rollout(
                     self.__space.state, container, dt, n_steps, control_sampling
                 )
             ],
             [
                 "state",
                 "controls",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["next_state"],
         )
 
     @property
     def state_jacobian(self):
         return cs.Function(
             "state_jacobian",
             [
                 self.__space.model.q,
                 self.__space.model.v,
                 self.__space.model.qfrc_u,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [self.__space.state_jacobian],
             [
                 "q",
                 "v",
                 "tau",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["state_jacobian"],
         )
 
     @property
     def input_jacobian(self):
         return cs.Function(
             "input_jacobian",
             [
                 self.__space.model.q,
                 self.__space.model.v,
                 self.__space.model.qfrc_u,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [self.__space.input_jacobian],
             [
                 "q",
                 "v",
                 "tau",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["input_jacobian"],
         )
 
     def force_jacobian(self, body_name: str) -> cs.Function:
         return cs.Function(
             f"force_jacobian_{body_name}",
             [
                 self.__space.model.q,
                 self.__space.model.v,
                 self.__space.model.qfrc_u,
                 *self.__space.model.contact_forces,
+                *self.__parameters,
             ],
             [self.__space.force_jacobian(body_name)],
             [
                 "q",
                 "v",
                 "tau",
                 *self.__space.model.contact_names,
+                *self.__parameters_name,
             ],
             ["input_jacobian"],
         )
```

## Comparing `darli/integrators/__init__.py` & `darli/state_space/integrators/__init__.py`

 * *Files identical despite different names*

## Comparing `darli/integrators/_base.py` & `darli/state_space/integrators/_base.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 """Module for base class of integrators."""
 
 from abc import ABC, abstractmethod
-from ..model._base import ModelBase
-from ..utils.arrays import ArrayLike
+from ...model._base import ModelBase
+from ...utils.arrays import ArrayLike
 import casadi as cs
 
 
 class IntegratorBase(ABC):
     """
     Abstract base class for integrators.
     This class provides the interface that all derived integrator classes should implement.
```

## Comparing `darli/integrators/_fwd_euler.py` & `darli/state_space/integrators/_fwd_euler.py`

 * *Files identical despite different names*

## Comparing `darli/integrators/_mid_point.py` & `darli/state_space/integrators/_mid_point.py`

 * *Files identical despite different names*

## Comparing `darli/integrators/_rk4.py` & `darli/state_space/integrators/_rk4.py`

 * *Files identical despite different names*

## Comparing `darli-0.4.0.dist-info/METADATA` & `darli-0.4.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: darli
-Version: 0.4.0
+Version: 0.4.1
 Summary: The DARLi is a Python 3 library that supports both numerical and symbolical computations of open loop articulated robots provided urdf file.
 Author: Lev Kozlov, Simeon Nedelchev
 Project-URL: homepage, https://github.com/simeon-ned/darli
 Project-URL: repository, https://github.com/simeon-ned/darli.git
 Requires-Python: >=3.9
 Description-Content-Type: text/markdown
 Requires-Dist: cmeel-casadi-kin-dyn >=1.6.11
```

## Comparing `darli-0.4.0.dist-info/RECORD` & `darli-0.4.1.dist-info/RECORD`

 * *Files 21% similar despite different names*

```diff
@@ -1,40 +1,44 @@
 darli/__init__.py,sha256=tCao-fL5Aee2X96eQniUarDN21tCey7-EWum_XoSYwg,92
 darli/backend/__init__.py,sha256=IOH3yKD3ZRuDRS-3QFrsoOBdmQObhRJWm4-y6nFLDq4,283
-darli/backend/_base.py,sha256=x_egacGz6lYyZGgK0GFrmE6DssU-9ltu5aJwpSPQaJ4,8325
-darli/backend/_casadi.py,sha256=Z-XmfjQcsUjL88gjhiaT3lU-y36DZO2HzKte9nX9WZ8,13463
-darli/backend/_pinocchio.py,sha256=1WcGCxFmBwO33NByp_ZBWCdoDPeOs3Cb7UEP02Zxw0Q,16832
-darli/functional/__init__.py,sha256=R0AF9EfqF4UFKLCikgZyAxJ4doU-fNEshwJDVoRUrcE,152
-darli/functional/_body.py,sha256=gqRsCG6-uJ5l7CQIhG2dsaGTrzZepC4qizmDIYPOWa0,7917
-darli/functional/_contact.py,sha256=eYvfG1PE-a9LPJ6dnzP7ApFYwonIYhP4QrGS9rd4YhY,1642
-darli/functional/_model.py,sha256=8IfpN1tWPUj8X7zf-tXe7vY5kqlgYVlrQBuFMEz6T8k,10387
-darli/functional/_state_space.py,sha256=XrbP7aNMFrAj_C0v1sAvbgxAl-wLkAogHRjQhQ4B644,5553
-darli/integrators/__init__.py,sha256=joaBuuwYNuz53ux_cU-ukEm9uBMSeJwkE2XEWNZqntk,1328
-darli/integrators/_base.py,sha256=1Un8qTF21DM4uHHSq7yTD6_v3IBDg3_6NZI-_MLDlqU,3453
-darli/integrators/_fwd_euler.py,sha256=gucccIkyY3csYsEkxZaJqJHtLBeiADRod_zkp3BMegM,1707
-darli/integrators/_mid_point.py,sha256=avrAE8_3IsGMUflhCvMSIBEDEQ6q7bO5AmBWplQLJdo,1933
-darli/integrators/_rk4.py,sha256=qF4mFhZR9RDiz3-IeCAUV0tM862yfJlIDmKnawNqzNQ,2090
-darli/model/__init__.py,sha256=xZ4gzZpwd4f1VVuuHI7dBmoSS-IHM3lRlyNObl0vWYQ,93
-darli/model/_base.py,sha256=k78JhmhBzJSEMWX3yGztkzwYqV7tSKrcoinpcagJsLU,6758
-darli/model/_body.py,sha256=Mh6sMDAiWMXVjaZIxwTM_12ETA_2q2qC3TvId6beSz8,6083
-darli/model/_contact.py,sha256=M0-IoFG2eVtoCwXF5jjJMajyrHRiSz8NxxZB_m1Kebc,2965
-darli/model/_model.py,sha256=KbMHbNYb1HgZmzqVp2wia5mLkURabI4ofufEEBrN8Do,10143
-darli/parametric/__init__.py,sha256=OtJ0cX-NrZ_s_MXImSUoeFPzzDUy2xkvL-4o6ZsPxQ4,67
-darli/parametric/_functional.py,sha256=co2YLZXVsDvF0z64SFOTJTtJDzlgxc5PUYO4kQpjISM,8627
-darli/parametric/_model.py,sha256=Ce0OGNzh96L9uLjsDlhhfg9VBA9ZQlfwObtyXFN-SyA,10573
+darli/backend/_base.py,sha256=NM4bZ5B5AjqFSMMAEQXLrSa7L8KjzfjiGE6MmM5uJpg,8481
+darli/backend/_casadi.py,sha256=tgYzbwrKwgAzYf9cySyItVHrJ38xBRGWPi6AhYyA1Ic,15153
+darli/backend/_pinocchio.py,sha256=RiD090nNvSKIlbtWzXabZMwNSWU97yvk9my_yw7tqwk,16905
+darli/backend/liecasadi/__init__.py,sha256=Ul0PqO0ODIPtqFEXuTzn_eYztdh_DBLcuxvAqa7BGcY,89
+darli/backend/liecasadi/quaternion.py,sha256=wUJZ5ZP62peZkS5EcoGs7WhJ7k_ISqSntYFPkb_GM7s,3948
+darli/backend/liecasadi/so3.py,sha256=byABXzhczxoJzWKO6sgd9dJx-oLBkPwphcihxBPk31A,7227
+darli/model/__init__.py,sha256=hvxXYiLLGk-07r7VbqOkEInGcR8_x9ncBeYylrxVoNc,142
+darli/model/_base.py,sha256=VJBhFPsnMSGuZyCz6Zsvmnh7xG0KwLwN-AGDxhJraYU,6869
+darli/model/_body.py,sha256=asau5jQLKHdcHjIkV4dOF9m9tr7S_-cnqOH9ELxVklk,6202
+darli/model/_contact.py,sha256=mCkXyg5zzn_D5pk4QEra5b8oOndGal-3IACHUKYAy3U,2967
+darli/model/_model.py,sha256=68xC6qXJqxt7c11L5RBAyNBJUPOcQZ-WxFEHdo7eXb8,9954
+darli/model/functional/__init__.py,sha256=LIr8dFead2_itpOF9FFwI0hdBSnLIJeoWIAzVQRc1N0,105
+darli/model/functional/_body.py,sha256=Qo8Ev86LsEgjoytr-tH3IDcrGZJvz-BpfMClxxU_8ZM,7906
+darli/model/functional/_contact.py,sha256=hW101AvNaTYOFCUFnyYEHVC2RO8sYPMwsSFEEdRRFpU,1631
+darli/model/functional/_model.py,sha256=DxDH6f3zk4_ny-MKVuY7S-5BKGBj1cgHoKLrQzFgDZk,10444
+darli/parametric/__init__.py,sha256=7e2t2unt37wuG2uBPbnai5D2C6qXb1skAe0j9q6af0o,62
+darli/parametric/_functional.py,sha256=8nuHVi8-7Vt9jS_q63B9x-5gA8DSNlewp3kbcOL8kgI,9623
+darli/parametric/_model.py,sha256=tjTTFUmwdgNa2mwAq7NeT2hjNdEL4m45TM-RB9V6Anc,11502
 darli/robots/__init__.py,sha256=XMgSjrgMpsx57_gQ4Awu_tvGcd9LKcTNVcF3FC0kB80,61
-darli/robots/_robots.py,sha256=Cunbg4IyGtIAXBqWo-mzgFxQCbOKEFmHILYGJLfV2c4,4350
-darli/state_space/__init__.py,sha256=GCw9KE-2f1jTeUVMfOZXG2qdMFBtfPVo7ZeMtb0uqzk,104
+darli/robots/_robots.py,sha256=-qzdHmtMazB4OQDysGgSfBxXlxZy4FpnkYmtGBoUTKA,4464
+darli/state_space/__init__.py,sha256=vtDnPwNbfb20KVvf-K5jBch1sc94k13Jhz49vnya3pM,193
 darli/state_space/_base.py,sha256=gEX2xhIje95unYOmbdYfhAaaqj8q9KMA6gssMG0VWY4,1027
-darli/state_space/_casadi.py,sha256=XWKRsN7_bAB1g-oZq3hbaUuBZuCKe04g6J93TYyeptQ,2081
-darli/state_space/_common.py,sha256=6_5Kl9oLnXmPdKeZPOJffL0h6QnjWMTlnerKPCa_EoY,4971
-darli/state_space/_pinocchio.py,sha256=igPFMHBXP91YjY-a4d5OfV9efK7gsHpulVXrFHkQaAM,588
+darli/state_space/_casadi.py,sha256=HNlNGJf08lnBw17avSp6Jukg7ZqsMegprZnBfq-0lnM,2135
+darli/state_space/_common.py,sha256=0avcJ1w-D3MBZj0gZfWvd75AvE_IMIhKt_ZmX79Rahs,4995
+darli/state_space/_functional.py,sha256=1ce4F_v2ogPfdNsLCvObkVlP5lbj2leRWnnahTEAoEE,6324
+darli/state_space/_pinocchio.py,sha256=Jcw2qET_CDiPgn0u1hYTbHoLaSyrGruXRL_wyohcns8,600
+darli/state_space/_state_space.py,sha256=vr6vvEYRsibbnuhsyivHKlgq_QFbXzreD94KBvPKwdE,1097
+darli/state_space/integrators/__init__.py,sha256=joaBuuwYNuz53ux_cU-ukEm9uBMSeJwkE2XEWNZqntk,1328
+darli/state_space/integrators/_base.py,sha256=z3sZC247dPtmYQZTyoUORWep9XFim2iPhl4pOsFGzwg,3455
+darli/state_space/integrators/_fwd_euler.py,sha256=gucccIkyY3csYsEkxZaJqJHtLBeiADRod_zkp3BMegM,1707
+darli/state_space/integrators/_mid_point.py,sha256=avrAE8_3IsGMUflhCvMSIBEDEQ6q7bO5AmBWplQLJdo,1933
+darli/state_space/integrators/_rk4.py,sha256=qF4mFhZR9RDiz3-IeCAUV0tM862yfJlIDmKnawNqzNQ,2090
 darli/utils/arrays/__init__.py,sha256=kGlJH-XJyW_B8AgPStYt-Y_isQV7Ga9sHAmW7zTZCqY,193
 darli/utils/arrays/_arraylike.py,sha256=Llhot52a6ExDew2vB-wkevFfiSrbWmUoFNV4q239CqI,2333
 darli/utils/arrays/_casadi.py,sha256=l5QFOcoKvAwYbXZ9X90Tn4uXAzyUTTvVS6hWY4Xw6Po,4578
-darli/utils/arrays/_numpy.py,sha256=OkhQ5KjHmL70ozH7tAsxHEGe-DeHDcZHrODVT25sZkQ,4753
-darli/utils/quaternions/__init__.py,sha256=9nYlbjVQiyU1rPY8YpzTKL5IGv-ALA1MOhKgsmxq1ew,72
-darli/utils/quaternions/_quaternions.py,sha256=t7cOWiLzEK6HpVsFVy8d0f4jXAd7-_6DfbdDFrZNv5s,2596
-darli-0.4.0.dist-info/METADATA,sha256=M-2M63ohtHWhUwxPg5HUjMCKxDr2ky01atrA3J6nfR4,7169
-darli-0.4.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-darli-0.4.0.dist-info/top_level.txt,sha256=qY4otbZCjFkySLgtfbkUvsU-2fS2ES9VBbG0-QKI9MY,6
-darli-0.4.0.dist-info/RECORD,,
+darli/utils/arrays/_numpy.py,sha256=VhhWrrqRPfrplq75WlJ0hBT3JpXzrB7uVHmZvF3PCKc,4754
+darli/utils/quaternions/__init__.py,sha256=xNtRVgh3jzvDaejt8JWEdxD_VMejpcrEL3CLX7WCrfU,72
+darli/utils/quaternions/_quaternions.py,sha256=2kXlo_iHSy5aJbglkDvBdehMlobUZduyKGQUuKPThGU,2597
+darli-0.4.1.dist-info/METADATA,sha256=R6sFir34G8fmKMFCL1aiOt6vDMXLSDJ0ukMZ_fHy_ws,7169
+darli-0.4.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+darli-0.4.1.dist-info/top_level.txt,sha256=qY4otbZCjFkySLgtfbkUvsU-2fS2ES9VBbG0-QKI9MY,6
+darli-0.4.1.dist-info/RECORD,,
```

