# Comparing `tmp/redlite-0.0.7-py3-none-any.whl.zip` & `tmp/redlite-0.0.8-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 174128 bytes, number of entries: 102
--rw-rw-r--  2.0 unx      369 b- defN 24-Jan-24 22:10 redlite/__init__.py
+Zip file size: 174293 bytes, number of entries: 102
+-rw-rw-r--  2.0 unx      369 b- defN 24-Jan-25 00:22 redlite/__init__.py
 -rw-rw-r--  2.0 unx      577 b- defN 24-Jan-24 19:18 redlite/__main__.py
 -rw-rw-r--  2.0 unx     1097 b- defN 24-Jan-23 20:07 redlite/_jsonl_storage.py
 -rw-rw-r--  2.0 unx      805 b- defN 24-Jan-16 22:01 redlite/_lock.py
 -rw-rw-r--  2.0 unx     3644 b- defN 24-Jan-18 17:10 redlite/abc.py
--rw-rw-r--  2.0 unx     2137 b- defN 24-Jan-24 21:40 redlite/core.py
+-rw-rw-r--  2.0 unx     2178 b- defN 24-Jan-25 00:01 redlite/core.py
 -rw-rw-r--  2.0 unx      904 b- defN 24-Jan-24 21:45 redlite/dataset.py
 -rw-rw-r--  2.0 unx     2784 b- defN 24-Jan-17 20:44 redlite/experiment.py
 -rw-rw-r--  2.0 unx      648 b- defN 24-Jan-11 14:59 redlite/hf_dataset.py
 -rw-rw-r--  2.0 unx     1127 b- defN 24-Jan-16 17:11 redlite/jsonl_storage.py
 -rw-rw-r--  2.0 unx     3025 b- defN 24-Jan-24 21:05 redlite/run.py
--rw-rw-r--  2.0 unx     2871 b- defN 24-Jan-24 21:44 redlite/util.py
+-rw-rw-r--  2.0 unx     2943 b- defN 24-Jan-24 23:44 redlite/util.py
 -rw-rw-r--  2.0 unx       59 b- defN 24-Jan-18 19:49 redlite/hf/__init__.py
--rw-rw-r--  2.0 unx     1039 b- defN 24-Jan-24 21:45 redlite/hf/hf_dataset.py
+-rw-rw-r--  2.0 unx     1385 b- defN 24-Jan-25 00:21 redlite/hf/hf_dataset.py
 -rw-rw-r--  2.0 unx     2076 b- defN 24-Jan-24 19:18 redlite/hf/hf_model.py
 -rw-rw-r--  2.0 unx      153 b- defN 24-Jan-24 19:18 redlite/metric/__init__.py
 -rw-rw-r--  2.0 unx      521 b- defN 24-Jan-24 19:18 redlite/metric/bleu.py
 -rw-rw-r--  2.0 unx      275 b- defN 24-Jan-16 12:45 redlite/metric/blue.py
 -rw-rw-r--  2.0 unx     4627 b- defN 24-Jan-24 19:18 redlite/metric/compute_bleu.py
 -rw-rw-r--  2.0 unx     1869 b- defN 24-Jan-24 19:18 redlite/metric/prefix.py
 -rw-rw-r--  2.0 unx      169 b- defN 24-Jan-23 20:07 redlite/metric/random.py
@@ -91,14 +91,14 @@
 -rw-rw-r--  2.0 unx     1977 b- defN 24-Jan-24 20:53 redlite/server/resources/build/_app/immutable/nodes/5.kHdy6coL.js
 -rw-rw-r--  2.0 unx     2000 b- defN 24-Jan-18 20:14 redlite/server/resources/build/_app/immutable/nodes/5.s0Lw--_V.js
 -rw-rw-r--  2.0 unx     6338 b- defN 24-Jan-18 17:07 redlite/server/resources/build/_app/immutable/nodes/6.46Dengs4.js
 -rw-rw-r--  2.0 unx     6338 b- defN 24-Jan-18 16:51 redlite/server/resources/build/_app/immutable/nodes/6.ICu3-wQL.js
 -rw-rw-r--  2.0 unx     6338 b- defN 24-Jan-18 20:14 redlite/server/resources/build/_app/immutable/nodes/6.LciEZBzr.js
 -rw-rw-r--  2.0 unx     6420 b- defN 24-Jan-24 20:53 redlite/server/resources/build/_app/immutable/nodes/6.Y6UzbvJ1.js
 -rw-rw-r--  2.0 unx      435 b- defN 24-Jan-24 20:53 redlite/server/resources/build/_app/immutable/nodes/7.fF5K6gpk.js
--rw-rw-r--  2.0 unx     1071 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/LICENSE
--rw-rw-r--  2.0 unx     2855 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/WHEEL
--rw-rw-r--  2.0 unx       50 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        8 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    11223 b- defN 24-Jan-24 22:12 redlite-0.0.7.dist-info/RECORD
-102 files, 383050 bytes uncompressed, 155346 bytes compressed:  59.4%
+-rw-rw-r--  2.0 unx     1071 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     2858 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       50 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        8 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    11223 b- defN 24-Jan-25 00:23 redlite-0.0.8.dist-info/RECORD
+102 files, 383512 bytes uncompressed, 155511 bytes compressed:  59.5%
```

## zipnote {}

```diff
@@ -282,26 +282,26 @@
 
 Filename: redlite/server/resources/build/_app/immutable/nodes/6.Y6UzbvJ1.js
 Comment: 
 
 Filename: redlite/server/resources/build/_app/immutable/nodes/7.fF5K6gpk.js
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/LICENSE
+Filename: redlite-0.0.8.dist-info/LICENSE
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/METADATA
+Filename: redlite-0.0.8.dist-info/METADATA
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/WHEEL
+Filename: redlite-0.0.8.dist-info/WHEEL
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/entry_points.txt
+Filename: redlite-0.0.8.dist-info/entry_points.txt
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/top_level.txt
+Filename: redlite-0.0.8.dist-info/top_level.txt
 Comment: 
 
-Filename: redlite-0.0.7.dist-info/RECORD
+Filename: redlite-0.0.8.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## redlite/__init__.py

```diff
@@ -6,15 +6,15 @@
     Role,
     NamedModel,
     NamedMetric,
 )
 from .run import run
 from .dataset import load_dataset
 
-__version__ = "0.0.7"
+__version__ = "0.0.8"
 __all__ = [
     "run",
     "load_dataset",
     "NamedModel",
     "NamedDataset",
     "NamedMetric",
     "DatasetItem",
```

## redlite/core.py

```diff
@@ -1,10 +1,10 @@
 import dataclasses
 import abc
-from collections.abc import Callable, Iterable
+from collections.abc import Callable, Iterable, Sized
 from typing import Any, TypedDict, Literal
 import logging
 
 
 log = logging.getLogger("redlite")
 
 
@@ -32,16 +32,17 @@
     return {"role": "user", "content": content}
 
 
 def assistant_message(content: str) -> Message:
     return {"role": "assistant", "content": content}
 
 
-class NamedDataset(Iterable[DatasetItem]):
+class NamedDataset(Sized, Iterable[DatasetItem]):
     name: str
+    labels: dict[str, str]
 
 
 class NamedMetric:
     name: str
 
     def __init__(self, name: str, engine: Callable[[str, str], float]):
         self.name = name
```

## redlite/util.py

```diff
@@ -1,11 +1,11 @@
 import hashlib
 import json
 import os
-from collections.abc import Iterable, Iterator
+from collections.abc import Iterable, Iterator, Sized
 from .core import NamedDataset, DatasetItem, ScoreSummary
 
 __all__ = [
     "DatasetRunningDigest",
     "parse_duration",
     "format_duration",
     "redlite_data_dir",
@@ -13,25 +13,28 @@
 __docformat__ = "google"
 
 
 def _serialize(obj: dict | DatasetItem) -> bytes:
     return json.dumps(obj, ensure_ascii=False, sort_keys=True).encode("utf-8")
 
 
-class DatasetRunningDigest(Iterable[DatasetItem]):
+class DatasetRunningDigest(Sized, Iterable[DatasetItem]):
     def __init__(self, dataset: NamedDataset, **kw):
         self._hash = hashlib.sha256(usedforsecurity=False)
         self._hash.update(_serialize(kw))
         self._dataset = dataset
 
     def __iter__(self) -> Iterator[DatasetItem]:
         for item in self._dataset:
             yield item
             self._hash.update(_serialize(item))
 
+    def __len__(self):
+        return len(self._dataset)
+
     @property
     def hexdigest(self) -> str:
         return self._hash.hexdigest()
 
 
 def format_duration(seconds: float) -> str:
     """Formats duration to a compact human-readable string, e.g. "1d 4h 27m 14.5s" """
```

## redlite/hf/hf_dataset.py

```diff
@@ -1,32 +1,40 @@
-from ..core import NamedDataset, user_message, MissingDependencyError
+from collections.abc import Iterator
+from ..core import NamedDataset, DatasetItem, user_message, MissingDependencyError
+
 
 try:
     from datasets import load_dataset
+    from huggingface_hub import DatasetCard
 except ImportError as err:
     raise MissingDependencyError("Please install datasets library") from err
 
 
 class HFDataset(NamedDataset):
     def __init__(self, hf_name: str, split="test"):
         super().__init__()
-        self.name = "hf:" + hf_name
+        self.name = "hf:" + hf_name + "@" + split
         self._dataset = load_dataset(hf_name, trust_remote_code=True)
+        self._card = DatasetCard.load(hf_name)
+        self.labels = getattr(self._card.data, "labels", {})
         self._split = split
 
-    def __iter__(self):
+    def __iter__(self) -> Iterator[DatasetItem]:
         for x in self._dataset[self._split]:
             prompt = x["prompt"]
             completion = x["completion"]
             id_ = x["id"]
 
             yield dict(
                 id=id_,
                 messages=[user_message(prompt)],
                 expected=completion,
             )
 
+    def __len__(self):
+        return self._dataset[self._split].info.splits[self._split].num_examples
+
     @classmethod
     def load(cls, name: str, split="test") -> "NamedDataset":
         if not name.startswith("hf:"):
             raise ValueError(f"This method can only load from HF dataset hub, but requested {name}")
         return cls(name[3:], split)
```

## Comparing `redlite-0.0.7.dist-info/LICENSE` & `redlite-0.0.8.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `redlite-0.0.7.dist-info/METADATA` & `redlite-0.0.8.dist-info/METADATA`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: redlite
-Version: 0.0.7
+Version: 0.0.8
 Summary: LLM testing on steroids
 Author-email: Mike Kroutikov <mkroutikov@innodata.com>, David Nadeau <dnadeau@innodata.com>
 License: MIT License
 Project-URL: Homepage, https://github.com/innodatalabs/redlite
 Project-URL: Documentation, https://redlite.readthedocs.org
 Project-URL: Repository, https://github.com/innodatalabs/redlite.git
 Project-URL: Issues, https://github.com/innodatalabs/redlite/issues
@@ -46,27 +46,23 @@
 1. `pip install redlite[all]`
 2. Generate several runs (using Python scripting, see below)
 3. `redlite server --port <PORT>`
 
 ## Python API
 
 ```python
-from redlite import run, NamedModel, Message
-from redlite.hf import HFDataset
-from redlite.metric import BleuMetric
+import os
+from redlite import run, load_dataset
+from redlite.openai import OpenAIModel
+from redlite.metric import PrefixMetric
 
 
-def parrot(messages: list[Message]) -> str:
-    return messages[-1].content
-
-
-model = NamedModel("parrot", parrot)
-
-dataset = HFDataset("innodatalabs/rt-cogensumm")
-metric = BleuMetric()
+model = OpenAIModel(api_key=os.environ["OPENAI_API_KEY"])
+dataset = load_dataset("hf:innodatalabs/rt-gaia")
+metric = PrefixMetric(ignore_case=True, ignore_punct=True, strip=True)
 
 run(model=model, dataset=dataset, metric=metric)
 ```
 
 ## Develop
 
 ```bash
```

## Comparing `redlite-0.0.7.dist-info/RECORD` & `redlite-0.0.8.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
-redlite/__init__.py,sha256=ggg0LbZHZ_JuMiUhvns0scjOuXg8NfUOQOxfVkDvQuI,369
+redlite/__init__.py,sha256=TD8cAx8EeCsKKJLCm5qfqFWz6rlKM-uBPpdZdizVIwU,369
 redlite/__main__.py,sha256=8w0nhbhddktqKldfIZpUunCUSjNTquv9_h62L1ZLVhg,577
 redlite/_jsonl_storage.py,sha256=2UrBdWAAyFA7_Orp1YegemZzTeGOlZlk8-xGxAegO6c,1097
 redlite/_lock.py,sha256=sdM_iLGCw2JVQvuZEM8uBqwd0KPkohddmWITvCg3UYw,805
 redlite/abc.py,sha256=OSFNDpvgqRTz0ukCbSl8BO5Rux96sjET70XWpZ1rpcA,3644
-redlite/core.py,sha256=rUsIuGsYQGrkmKHjRtMrDykdlene57dF_B3xtyP9_GM,2137
+redlite/core.py,sha256=N2E1urcO_9nfyJmaZUWcnugZVqPVkwpGrYoRZbTtYlk,2178
 redlite/dataset.py,sha256=H5KV_5eje1-eI0dLOSPwdJG4oFpyuieMm0_rBZJaKsw,904
 redlite/experiment.py,sha256=_egMzaEYNPQmV8yEGq7hhoWa1OSycYz1nnnrOvbpOqI,2784
 redlite/hf_dataset.py,sha256=OY0TmnoqQNgFTZ5b2fAUaHZxfAqOarB_b090KCLBY3g,648
 redlite/jsonl_storage.py,sha256=0qdlDnSKlIgt8sdV1JGaXjtv6Aqt7_yg33CqhbGxi1o,1127
 redlite/run.py,sha256=Y25qv9XHYNLUvACtl7Mh2vU96RyHymDZwRJXP2ugA7k,3025
-redlite/util.py,sha256=W8JGrbXsr183MTW2NSxZJ0wTDsm4PpqcoOs8AlnaxCQ,2871
+redlite/util.py,sha256=0jMOvnxS8CLSCJlNX9rC8I2XxPSpZ5Xi7oNEyWoGZYM,2943
 redlite/hf/__init__.py,sha256=Aa1rwwXm73mlwizMDuVP15SJp90Qcu3SjnP-PMRG5kE,59
-redlite/hf/hf_dataset.py,sha256=Z23g6KhAXj9BFCd2aubLvq6XA56cJNCqNe5BCG4MUE4,1039
+redlite/hf/hf_dataset.py,sha256=G-LwMkm34aeyQL7ZhVOXRp2c0lI6Mn5witsURaBQycQ,1385
 redlite/hf/hf_model.py,sha256=iaxZMnRjoLLxxxWwRBD-J_cJdiNiZKitKO8h3Nq98YQ,2076
 redlite/metric/__init__.py,sha256=D9DZ2bSowU3Hsp712X-EXGBH0noHTD4noqz5z72YQMA,153
 redlite/metric/bleu.py,sha256=Lt8bYMGs1PEMqNdkA4D5dI7NbOO2f-tVWWRG8VW6BP4,521
 redlite/metric/blue.py,sha256=e8X_D6_lLRM3sPFcKX8ij-6PaqJWmRaFAce-YPMv0t8,275
 redlite/metric/compute_bleu.py,sha256=tdcqcblvDIurhIVga98TBFZU0SATh9FPcQnXYfQ2mR4,4627
 redlite/metric/prefix.py,sha256=vVkJeBptASdNI1PGJc0d3q-KVe8hvI2Zjhy3BI5aFeo,1869
 redlite/metric/random.py,sha256=hK5_rRude5BEbnopYfPwVi3JV9DNVOuqKpigkECAOlU,169
@@ -90,13 +90,13 @@
 redlite/server/resources/build/_app/immutable/nodes/5.kHdy6coL.js,sha256=BK57K8saTVIjx13SvtPOkkbDyQOxTsn6X4cfL54Ncps,1977
 redlite/server/resources/build/_app/immutable/nodes/5.s0Lw--_V.js,sha256=bdbxPn1dnuni1P6zeZskD-QBPSqirIDJJhlKqnaiRjQ,2000
 redlite/server/resources/build/_app/immutable/nodes/6.46Dengs4.js,sha256=mix497eQJtsJTGRb2S2fUjwVeoSL2BVppQtYX0mD1mA,6338
 redlite/server/resources/build/_app/immutable/nodes/6.ICu3-wQL.js,sha256=eqRX7ZXiSsILtb4dxf2AXfYaIacfAkl11Nwcdqwfrb4,6338
 redlite/server/resources/build/_app/immutable/nodes/6.LciEZBzr.js,sha256=V94-mo_LRi__McycDzCG_ET-51Bm3CoeBLCoXYd4aPc,6338
 redlite/server/resources/build/_app/immutable/nodes/6.Y6UzbvJ1.js,sha256=tT6854p4HBPduBta2SwuXkvLwG48KoVNguXA3sEmIhk,6420
 redlite/server/resources/build/_app/immutable/nodes/7.fF5K6gpk.js,sha256=IpMsUqwhccXKGeZXGfMYL0j96n6uayqxIt0AaDV2Dc0,435
-redlite-0.0.7.dist-info/LICENSE,sha256=kZKRsVQHychHYv7Sc7DjcIWxR4h97y7c-kfdo_GiXnQ,1071
-redlite-0.0.7.dist-info/METADATA,sha256=y1g5mbkUBAeBNCMb948BIW_8H9qZOp52LzEs5H3D6qI,2855
-redlite-0.0.7.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-redlite-0.0.7.dist-info/entry_points.txt,sha256=F3u0t1T8WflnUv6dQxV99aNHg3TY_R6GIQ_1kucAP8Y,50
-redlite-0.0.7.dist-info/top_level.txt,sha256=fzFhwp7BwhuEW_IwLiIiOXjdgvL07JpsCqEaPCd4YJ0,8
-redlite-0.0.7.dist-info/RECORD,,
+redlite-0.0.8.dist-info/LICENSE,sha256=kZKRsVQHychHYv7Sc7DjcIWxR4h97y7c-kfdo_GiXnQ,1071
+redlite-0.0.8.dist-info/METADATA,sha256=6TgCgxjuFFj5VRP-VsCZIEnYqaEpvzpoB_lVUWtBRw4,2858
+redlite-0.0.8.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+redlite-0.0.8.dist-info/entry_points.txt,sha256=F3u0t1T8WflnUv6dQxV99aNHg3TY_R6GIQ_1kucAP8Y,50
+redlite-0.0.8.dist-info/top_level.txt,sha256=fzFhwp7BwhuEW_IwLiIiOXjdgvL07JpsCqEaPCd4YJ0,8
+redlite-0.0.8.dist-info/RECORD,,
```

